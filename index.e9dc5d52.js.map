{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,iBCAMC,EAAQC,SAASC,cAAc,mBAMrC,SAASC,EAAWC,EAAWC,GAC7B,IAAIC,EAAQ,GAERC,EAAaF,EAAO,EACpBG,EAAaH,EAAO,EAEpBA,EAAO,IACTC,GAAS,uDAERG,OADCJ,EAAO,EACR,wFAICA,EAAO,IACTC,GAAU,0EAEND,EAAO,IACTC,GAAU,2CAIVD,GAAQD,EACVG,GAA0B,EACjBF,GAAQD,EAAY,IAC7BG,GAA0B,GAGhB,GAARF,EACFG,GAA0B,EACT,GAARH,IACTG,GAA0B,GAG5B,IAAK,IAAIE,EAAaH,EAAYG,GAAcF,EAAYE,IACtDA,EAAaN,IAGC,GAAdM,IACFA,GAA0B,GAQ5BJ,GAAS,mBAAgEG,OALrEJ,GAAQK,EACC,SAEA,GAEwB,sCAA0DD,OAAtBC,EAAW,aAAsBD,OAAXC,EAAW,iBAGxGL,EAAOD,EAAY,IACjBC,EAAOD,EAAY,IACrBE,GAAU,0CAEZA,GAAS,mDAAwEG,OAArBL,EAAU,aAAqBK,OAAVL,EAAU,iBAGzFC,EAAOD,IACTE,GAAS,uDAAgEG,OAATJ,EAAO,EAAE,wFAI3EL,EAAMW,UAAYL,C,uBCnEpBR,EAAAC,EAAA,S,4BAKMa,EAAU,6BAEVC,EAAUZ,SAASC,cAAc,aACjCY,EAAYb,SAASC,cAAc,eACnCa,EAAkB,IAAI,EAAAjB,EAAAkB,SAU5B,SAASC,IACPC,OAAOC,oBAAoB,UAAWC,GACtCnB,SAASoB,KAAKC,UAAUC,OAAO,cAC/BtB,SAASoB,KAAKG,MAAMC,SAAW,M,CAGjC,SAASC,EAAgBC,GACnBA,EAAMC,SAAWD,EAAME,eACzBZ,G,CAGJ,SAASG,EAAcO,GACA,WACjBA,EAAMG,MACRb,G,CAtBJJ,EAAQkB,iBAAiB,SA0BzB,SAAsBC,GACpB,GAA0B,QAAtBA,EAAEJ,OAAOK,UAA4C,OAAtBD,EAAEJ,OAAOK,SAC1C,OAEF,IAAIC,EAAKF,EAAEJ,OAAOO,QAAQD,GAE1BnB,EAAgBqB,cAAcF,GAAIG,MAAK,SAAAC,IA6EzC,SAAyBA,GACvB,IAAMC,GA/DmBC,EA+DQF,EA9DjCG,QAAQC,IAAIF,GACZC,QAAQC,IAAI,GAAuBjC,OAApBG,EAAQ,cAA6BH,OAAjB+B,EAAKG,cACjC,gWAU0ClC,OAApBG,EAAQ,cAAsCH,OAA1B+B,EAAKG,YAAY,WAItBlC,OAJ+B+B,EAAKI,MAC7E,qHASoDnC,OANX+B,EAAKI,MAAM,mQAQhDnC,OAFgD+B,EAAKK,aAAaC,QACrE,GACA,KAIoDrC,OAJjD+B,EAAKO,WAAW,gNAUoCtC,OANH+B,EAAKQ,WAAWF,QACpE,GACA,uNASoDrC,OALG+B,EAAKS,eAC7D,2MAY2CxC,OARU+B,EAAKU,OACxDC,KAAI,SAAAC,G,OAASA,EAAMC,I,IACnBC,KAAK,MAAM,oNAM4C7C,OAAd+B,EAAKe,SAAS,gZAhD9D,IAA2Bf,EAgEzB1B,EAAUH,UAAY4B,EACtBzB,EAAUQ,UAAUkC,IAAI,WACxBvD,SAASoB,KAAKG,MAAMC,SAAW,Q,CAhF7BgC,CAAgBnB,GAChB,IAAMoB,EAAmBzD,SAASC,cAAc,iBAChDgB,OAAOa,iBAAiB,UAAWX,GACnCsC,EAAiB3B,iBAAiB,QAASd,GACrBhB,SAASC,cAAc,oBAC/B6B,iBAAiB,QAASL,GACxCzB,SAASoB,KAAKC,UAAUkC,IAAI,cAE5B,IAAMG,EAAc1D,SAASC,cAAc,kBACrC0D,EAAgB3D,SAASC,cAAc,oBAC7CyD,EAAY5B,iBAAiB,SAAS,W,OAAM,EAAA8B,EAAAC,cAAa,YAAaxB,E,IACtEsB,EAAc7B,iBAAiB,SAAS,W,OAAM,EAAA8B,EAAAC,cAAa,cAAexB,E,UF9C9E,IAAMyB,EAAO,CACXC,SAAU/D,SAASC,cAAc,cGTjCD,SAASC,cAAc,sBAAsBoB,UAAUkC,IAAI,WHa7D,IAAMS,EAAiB,IAAI,EAAAnE,EAAAkB,SAE3BiD,EAAeC,YACfD,EACGE,UAHe,GAIf9B,MAAK,SAAA+B,G,IAAGC,EAAOD,EAAPC,QAAwBC,GAAFF,EAAbG,cAA0BH,EAAXE,aAAajE,EAAI+D,EAAJ/D,KACtCkC,EAAsB8B,EAOjBG,QAAO,SAACC,EAAKC,G,OAASD,GAAM,EAAAE,EAAAC,YAAWF,E,GAAO,IANzDvE,EAAWmE,EAAajE,GACxB0D,EAAKC,SAASa,mBAAmB,YAAatC,GGlBhDtC,SAASC,cAAc,sBAAsBoB,UAAUC,OAAO,U","sources":["src/index.js","src/js/pagination.js","src/js/open-close-modal.js","src/js/preloader.js"],"sourcesContent":["import TrendingMovies from './js/trending-movies';\nimport { preloaderShow, hidePreloader } from './js/preloader';\nimport { headMarkup } from './js/gallery-item';\nimport { pagination } from './js/pagination';\nimport './js/local-storage';\nimport './js/modal-footer';\nimport './js/open-close-modal';\n//import './js/modal-btns'\n\nconst refs = {\n  listFilm: document.querySelector('.listFilm'),\n};\n\npreloaderShow();\nconst trendingMovies = new TrendingMovies();\nconst startPage = 1;\ntrendingMovies.getGenres();\ntrendingMovies\n  .getMovies(startPage)\n  .then(({ results, total_results, total_pages, page }) => {\n    const markup = createMarkup(results);\n    pagination(total_pages, page);\n    refs.listFilm.insertAdjacentHTML('beforeend', markup);\n    hidePreloader();\n  });\n\nfunction createMarkup(cards) {\n  return cards.reduce((acc, card) => acc + headMarkup(card), '');\n}\n/* примитивный вызов для наглядности рендеринка, позже изменить */\n/* pagination(totalPage, currentPage); */\n","const ulTag = document.querySelector('.pagination-btn');\n/*  totalPage общее колличество страниц которые пришли с бекенда */\n//let totalPage = 20;\n/* currentPage  текущая страница которая отображвутся на екране */\n//let currentPage = 5;\n\nfunction pagination(totalPage, page) {\n  let liTag = '';\n  let activeLi = '';\n  let beforPages = page - 1;\n  let afterPages = page + 1;\n\n  if (page > 1) {\n    liTag += `<li class=\"btn prev\" onclick=\"pagination(totalPage, ${\n      page - 1\n    })\" >\n          <span><i class=\"fa-solid fa-arrow-left\"></i> </span>\n        </li>`;\n  }\n  if (page > 2) {\n    liTag += `<li class=\"numb\" onclick=\"pagination(totalPage, 1)\"><span>1</span></li>`;\n\n    if (page > 3) {\n      liTag += `<li class=\"dots\"><span>...</span></li>`;\n    }\n  }\n\n  if (page == totalPage) {\n    beforPages = beforPages - 2;\n  } else if (page == totalPage - 1) {\n    beforPages = beforPages - 1;\n  }\n\n  if (page == 1) {\n    afterPages = afterPages + 2;\n  } else if (page == 2) {\n    afterPages = afterPages + 1;\n  }\n\n  for (let pageLength = beforPages; pageLength <= afterPages; pageLength++) {\n    if (pageLength > totalPage) {\n      continue;\n    }\n    if (pageLength == 0) {\n      pageLength = pageLength + 1;\n    }\n\n    if (page == pageLength) {\n      activeLi = 'active';\n    } else {\n      activeLi = '';\n    }\n    liTag += `<li class=\"numb ${activeLi}\"  onclick=\"pagination(totalPage, ${pageLength})\"><span>${pageLength}</span></li>`;\n  }\n\n  if (page < totalPage - 1) {\n    if (page < totalPage - 2) {\n      liTag += `<li class=\"dots\"><span>...</span></li>`;\n    }\n    liTag += `<li class=\"numb\" onclick=\"pagination(totalPage, ${totalPage})\"><span>${totalPage}</span></li>`;\n  }\n\n  if (page < totalPage) {\n    liTag += `<li class=\"btn next\" onclick=\"pagination(totalPage, ${page + 1})\">\n          <span> <i class=\"fa-solid fa-arrow-right\"></i></span>\n        </li>`;\n  }\n  ulTag.innerHTML = liTag;\n}\n/* вызов функции пагинации */\n/* console.log(currentPage);\npagination(totalPage, currentPage);\n */\nexport { pagination };\n","import TrendingMovies from './trending-movies';\n\nimport { addStorage, getStorage } from './local-storage';\nimport { addToStorage } from './modal-btns';\n// открытие-закрытие модалки\nconst IMG_URL = 'https://image.tmdb.org/t/p';\n\nconst gallery = document.querySelector('.listFilm');\nconst modalCard = document.querySelector('.modal-card');\nconst trendingMovies2 = new TrendingMovies();\n\ngallery.addEventListener('click', clickOnMovie);\n\n// function onModalOpen() {\n//   window.addEventListener('keydown', onEscKeyPress);\n//   closeModalButton.addEventListener('click', onModalClose);\n//   modalBackdrop.addEventListener('click', onBackdropClick);\n//   document.body.classList.add('show-modal');\n// }\nfunction onModalClose() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  document.body.classList.remove('show-modal');\n  document.body.style.overflow = 'auto';\n  // document.body.classList.remove('lock');\n}\nfunction onBackdropClick(event) {\n  if (event.target === event.currentTarget) {\n    onModalClose();\n  }\n}\nfunction onEscKeyPress(event) {\n  const ESC_KEY_CODE = 'Escape';\n  if (event.code === ESC_KEY_CODE) {\n    onModalClose();\n  }\n}\n\nfunction clickOnMovie(e) {\n  if (e.target.nodeName !== 'IMG' && e.target.nodeName !== 'H2') {\n    return;\n  }\n  let id = e.target.dataset.id;\n\n  trendingMovies2.getMoviesById(id).then(res => {\n    renderModalCard(res);\n    const closeModalButton = document.querySelector('.close-button');\n    window.addEventListener('keydown', onEscKeyPress);\n    closeModalButton.addEventListener('click', onModalClose);\n    const modalBackdrop = document.querySelector('.modal__backdrop');\n    modalBackdrop.addEventListener('click', onBackdropClick);\n    document.body.classList.add('show-modal');\n    // btn---------------------------------------------------\n    const addQueueBtn = document.querySelector(\".btnQueueModal\");\n    const addWatchedBtn = document.querySelector(\".btnWatchedModal\");\n    addQueueBtn.addEventListener('click', () => addToStorage(\"queueList\", res));\n    addWatchedBtn.addEventListener('click', () => addToStorage(\"watchedList\", res));\n  });\n}\nfunction createModalMarkup(item) {\n  console.log(item);\n  console.log(`${IMG_URL}/original/${item.poster_path}`);\n  return `\n      <div class=\"modal__backdrop  js-backdrop\">\n\n        <div class=\"modal__container\">\n\n            <button class=\"close-button\" data-action=\"close-modal\">\n            </button>\n            <div class=\"modal__content\">\n                <div class=\"film__poster\">\n                    <img class=\"film__image\"\n                        src=\"${IMG_URL}/original/${item.poster_path}\" alt=\"${item.title\n    }\">\n            </div>\n            <div class=\" film_description\">\n                    <h2 class=\"film__title\">${item.title}</h2>\n\n                    <div class=\"grid-container\">\n                        <table>\n                            <tr>\n                                <td class=\"film__info\">Vote / Votes</td>\n                                <td class=\"film__vote\">${item.vote_average.toFixed(\n      1\n    )}/${item.vote_count}</td>\n                            </tr>\n                            <tr>\n                                <td class=\"film__info\">Popularity</td>\n                                <td class=\"film__value\">${item.popularity.toFixed(\n      1\n    )}</td>\n                            </tr>\n                            <tr>\n                                <td class=\"film__info\">Original Title</td>\n                                <td class=\"film__original\">${item.original_title\n    }</td>\n                            </tr>\n                            <tr>\n                                <td class=\"film__info\">Genre</td>\n                                <td class=\"film__value\">${item.genres\n      .map(genre => genre.name)\n      .join(', ')}</td>\n                            </tr>\n                        </table>\n                    </div>\n\n                    <h3 class=\"film__about\">About</h3>\n                    <p class=\"film__overview\">${item.overview}</p>\n\n                    <div class=\"modal__buttons\">\n                        <button type=\"button\" class=\"film__button btn__watch btnWatchedModal\">Add to watched</button>\n                        <button type=\"button\" class=\"film__button btn__queue btnQueueModal\">Add to queue</button>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n `;\n}\n\nfunction renderModalCard(res) {\n  const markup = createModalMarkup(res);\n  modalCard.innerHTML = markup;\n  modalCard.classList.add('is-open');\n  document.body.style.overflow = 'hidden';\n}\n","function preloaderShow() {\n  document.querySelector('.preloader-overlay').classList.add('is-open');\n}\nfunction hidePreloader() {\n  document.querySelector('.preloader-overlay').classList.remove('is-open');\n}\n\nexport { preloaderShow, hidePreloader };\n"],"names":["$lXjIN","parcelRequire","$dfaf77c789ce7a24$var$ulTag","document","querySelector","$dfaf77c789ce7a24$export$22fa394f3ba39578","totalPage","page","liTag","beforPages","afterPages","concat","pageLength","innerHTML","$88baea95ffd32ef8$var$IMG_URL","$88baea95ffd32ef8$var$gallery","$88baea95ffd32ef8$var$modalCard","$88baea95ffd32ef8$var$trendingMovies2","default","$88baea95ffd32ef8$var$onModalClose","window","removeEventListener","$88baea95ffd32ef8$var$onEscKeyPress","body","classList","remove","style","overflow","$88baea95ffd32ef8$var$onBackdropClick","event","target","currentTarget","code","addEventListener","e","nodeName","id","dataset","getMoviesById","then","res","markup","item","console","log","poster_path","title","vote_average","toFixed","vote_count","popularity","original_title","genres","map","genre","name","join","overview","add","$88baea95ffd32ef8$var$renderModalCard","closeModalButton","addQueueBtn","addWatchedBtn","$4uNB6","addToStorage","$b8f9b7833fa37166$var$refs","listFilm","$b8f9b7833fa37166$var$trendingMovies","getGenres","getMovies","param","results","total_pages","total_results","reduce","acc","card","$lXd85","headMarkup","insertAdjacentHTML"],"version":3,"file":"index.e9dc5d52.js.map"}