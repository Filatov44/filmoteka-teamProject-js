{"mappings":"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","sources":["src/index.js","src/js/pagination.js","src/js/open-close-modal.js","src/js/preloader.js"],"sourcesContent":["import TrendingMovies from './js/trending-movies';\nimport { preloaderShow, hidePreloader } from './js/preloader';\nimport { headMarkup } from './js/gallery-item';\nimport { pagination } from './js/pagination';\nimport './js/local-storage';\nimport './js/modal-footer';\nimport './js/open-close-modal';\n//import './js/modal-btns'\n\nconst refs = {\n  listFilm: document.querySelector('.listFilm'),\n};\n\npreloaderShow();\nconst trendingMovies = new TrendingMovies();\nconst startPage = 1;\ntrendingMovies.getGenres();\ntrendingMovies\n  .getMovies(startPage)\n  .then(({ results, total_results, total_pages, page }) => {\n    const markup = createMarkup(results);\n    pagination(total_pages, page);\n    refs.listFilm.insertAdjacentHTML('beforeend', markup);\n    hidePreloader();\n  });\n\nfunction createMarkup(cards) {\n  return cards.reduce((acc, card) => acc + headMarkup(card), '');\n}\n/* примитивный вызов для наглядности рендеринка, позже изменить */\n/* pagination(totalPage, currentPage); */\n","const ulTag = document.querySelector('.pagination-btn');\n/*  totalPage общее колличество страниц которые пришли с бекенда */\n//let totalPage = 20;\n/* currentPage  текущая страница которая отображвутся на екране */\n//let currentPage = 5;\n\nfunction pagination(totalPage, page) {\n  let liTag = '';\n  let activeLi = '';\n  let beforPages = page - 1;\n  let afterPages = page + 1;\n\n  if (page > 1) {\n    liTag += `<li class=\"btn prev\" onclick=\"pagination(totalPage, ${\n      page - 1\n    })\" >\n          <span><i class=\"fa-solid fa-arrow-left\"></i> </span>\n        </li>`;\n  }\n  if (page > 2) {\n    liTag += `<li class=\"numb\" onclick=\"pagination(totalPage, 1)\"><span>1</span></li>`;\n\n    if (page > 3) {\n      liTag += `<li class=\"dots\"><span>...</span></li>`;\n    }\n  }\n\n  if (page == totalPage) {\n    beforPages = beforPages - 2;\n  } else if (page == totalPage - 1) {\n    beforPages = beforPages - 1;\n  }\n\n  if (page == 1) {\n    afterPages = afterPages + 2;\n  } else if (page == 2) {\n    afterPages = afterPages + 1;\n  }\n\n  for (let pageLength = beforPages; pageLength <= afterPages; pageLength++) {\n    if (pageLength > totalPage) {\n      continue;\n    }\n    if (pageLength == 0) {\n      pageLength = pageLength + 1;\n    }\n\n    if (page == pageLength) {\n      activeLi = 'active';\n    } else {\n      activeLi = '';\n    }\n    liTag += `<li class=\"numb ${activeLi}\"  onclick=\"pagination(totalPage, ${pageLength})\"><span>${pageLength}</span></li>`;\n  }\n\n  if (page < totalPage - 1) {\n    if (page < totalPage - 2) {\n      liTag += `<li class=\"dots\"><span>...</span></li>`;\n    }\n    liTag += `<li class=\"numb\" onclick=\"pagination(totalPage, ${totalPage})\"><span>${totalPage}</span></li>`;\n  }\n\n  if (page < totalPage) {\n    liTag += `<li class=\"btn next\" onclick=\"pagination(totalPage, ${page + 1})\">\n          <span> <i class=\"fa-solid fa-arrow-right\"></i></span>\n        </li>`;\n  }\n  ulTag.innerHTML = liTag;\n}\n/* вызов функции пагинации */\n/* console.log(currentPage);\npagination(totalPage, currentPage);\n */\nexport { pagination };\n","import TrendingMovies from './trending-movies';\n\nimport { addStorage, getStorage } from './local-storage';\nimport { addToStorage } from './modal-btns';\n// открытие-закрытие модалки\nconst IMG_URL = 'https://image.tmdb.org/t/p';\n\nconst gallery = document.querySelector('.listFilm');\nconst modalCard = document.querySelector('.modal-card');\nconst trendingMovies2 = new TrendingMovies();\n\ngallery.addEventListener('click', clickOnMovie);\n\n// function onModalOpen() {\n//   window.addEventListener('keydown', onEscKeyPress);\n//   closeModalButton.addEventListener('click', onModalClose);\n//   modalBackdrop.addEventListener('click', onBackdropClick);\n//   document.body.classList.add('show-modal');\n// }\nfunction onModalClose() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  document.body.classList.remove('show-modal');\n  document.body.style.overflow = 'auto';\n  // document.body.classList.remove('lock');\n}\nfunction onBackdropClick(event) {\n  if (event.target === event.currentTarget) {\n    onModalClose();\n  }\n}\nfunction onEscKeyPress(event) {\n  const ESC_KEY_CODE = 'Escape';\n  if (event.code === ESC_KEY_CODE) {\n    onModalClose();\n  }\n}\n\nfunction clickOnMovie(e) {\n  if (e.target.nodeName !== 'IMG' && e.target.nodeName !== 'H2') {\n    return;\n  }\n  let id = e.target.dataset.id;\n\n  trendingMovies2.getMoviesById(id).then(res => {\n    renderModalCard(res);\n    const closeModalButton = document.querySelector('.close-button');\n    window.addEventListener('keydown', onEscKeyPress);\n    closeModalButton.addEventListener('click', onModalClose);\n    const modalBackdrop = document.querySelector('.modal__backdrop');\n    modalBackdrop.addEventListener('click', onBackdropClick);\n    document.body.classList.add('show-modal');\n    // btn---------------------------------------------------\n    const addQueueBtn = document.querySelector(\".btnQueueModal\");\n    const addWatchedBtn = document.querySelector(\".btnWatchedModal\");\n    addQueueBtn.addEventListener('click', () => addToStorage(\"queueList\", res));\n    addWatchedBtn.addEventListener('click', () => addToStorage(\"watchedList\", res));\n  });\n}\nfunction createModalMarkup(item) {\n  console.log(item);\n  console.log(`${IMG_URL}/original/${item.poster_path}`);\n  return `\n      <div class=\"modal__backdrop  js-backdrop\">\n\n        <div class=\"modal__container\">\n\n            <button class=\"close-button\" data-action=\"close-modal\">\n            </button>\n            <div class=\"modal__content\">\n                <div class=\"film__poster\">\n                    <img class=\"film__image\"\n                        src=\"${IMG_URL}/original/${item.poster_path}\" alt=\"${item.title\n    }\">\n            </div>\n            <div class=\" film_description\">\n                    <h2 class=\"film__title\">${item.title}</h2>\n\n                    <div class=\"grid-container\">\n                        <table>\n                            <tr>\n                                <td class=\"film__info\">Vote / Votes</td>\n                                <td class=\"film__vote\">${item.vote_average.toFixed(\n      1\n    )}/${item.vote_count}</td>\n                            </tr>\n                            <tr>\n                                <td class=\"film__info\">Popularity</td>\n                                <td class=\"film__value\">${item.popularity.toFixed(\n      1\n    )}</td>\n                            </tr>\n                            <tr>\n                                <td class=\"film__info\">Original Title</td>\n                                <td class=\"film__original\">${item.original_title\n    }</td>\n                            </tr>\n                            <tr>\n                                <td class=\"film__info\">Genre</td>\n                                <td class=\"film__value\">${item.genres\n      .map(genre => genre.name)\n      .join(', ')}</td>\n                            </tr>\n                        </table>\n                    </div>\n\n                    <h3 class=\"film__about\">About</h3>\n                    <p class=\"film__overview\">${item.overview}</p>\n\n                    <div class=\"modal__buttons\">\n                        <button type=\"button\" class=\"film__button btn__watch btnWatchedModal\">Add to watched</button>\n                        <button type=\"button\" class=\"film__button btn__queue btnQueueModal\">Add to queue</button>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>\n `;\n}\n\nfunction renderModalCard(res) {\n  const markup = createModalMarkup(res);\n  modalCard.innerHTML = markup;\n  modalCard.classList.add('is-open');\n  document.body.style.overflow = 'hidden';\n}\n","function preloaderShow() {\n  document.querySelector('.preloader-overlay').classList.add('is-open');\n}\nfunction hidePreloader() {\n  document.querySelector('.preloader-overlay').classList.remove('is-open');\n}\n\nexport { preloaderShow, hidePreloader };\n"],"names":["$d7HNs","parcelRequire","$1bab9c519cfa82bc$var$ulTag","document","querySelector","$1bab9c519cfa82bc$export$22fa394f3ba39578","totalPage","page","liTag","activeLi","beforPages","afterPages","pageLength","innerHTML","$1072cb84ef373f51$var$gallery","$1072cb84ef373f51$var$modalCard","$1072cb84ef373f51$var$trendingMovies2","default","$1072cb84ef373f51$var$onModalClose","window","removeEventListener","$1072cb84ef373f51$var$onEscKeyPress","body","classList","remove","style","overflow","$1072cb84ef373f51$var$onBackdropClick","event","target","currentTarget","code","addEventListener","e","nodeName","id","dataset","getMoviesById","then","res","markup","item","console","log","poster_path","title","vote_average","toFixed","vote_count","popularity","original_title","genres","map","genre","name","join","overview","add","$1072cb84ef373f51$var$renderModalCard","closeModalButton","addQueueBtn","addWatchedBtn","$kYzA7","addToStorage","$1f0dc3b9307be026$var$refs","listFilm","$1f0dc3b9307be026$var$trendingMovies","getGenres","getMovies","results","total_results","total_pages","reduce","acc","card","$9kkjz","headMarkup","insertAdjacentHTML"],"version":3,"file":"index.7e233c09.js.map"}